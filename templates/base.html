{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<<<<<<< HEAD
    <title>{% block title %}Blog de Noticias{% endblock title %}</title>
    
    <link rel="stylesheet" href="{% static 'css/index.css' %}">

    {% block extra_css %}
    {% endblock extra_css %}

</head>
<body>
    
    <header>
        <nav>
            <ul>
                <li><a href="{% url 'publicaciones:lista' %}">Inicio</a></li>
                <li><a href="{% url 'publicaciones:acerca' %}">Acerca de</a></li>

                <li class="dropdown">
                    <a href="#" class="dropbtn" onclick="toggleMenu()">Categorías ▾</a> 

                    <ul id="miDropdown" class="dropdown-content">
                        
                        <li><a href="{% url 'publicaciones:lista' %}">Todas las publicaciones</a></li>
                        <div class="dropdown-divider"></div>

                        {% for category in categories %} 
                            <li>
                                <a href="{% url 'publicaciones:category_posts' category_slug=category.slug %}">
                                    {{ category.name }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
                {% if user.is_authenticated %}
                    <li style="color: white; margin-right: 15px;">Hola, {{ user.username }}</li>
                    <li><a href="{% url 'logout' %}">Cerrar Sesión</a></li>
                    <li><a href="Form.html">Contacto</a></li>
                {% else %}
                    <li><a href="{% url 'publicaciones:registro' %}">Registro</a></li>
                    <li><a href="{% url 'login' %}">Iniciar Sesión</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <main class="container">
        {% block contenido %}
=======
    <title>{% block titulo %}Blog de Noticias{% endblock titulo %}</title>
    </head>
<body>

    <header>
        <h1><a href="{% url 'publicaciones:lista' %}">BLOG DE NOTICIAS</a></h1>
        
        {# Ocultar la navegación principal en Login/Registro #}
        {% if request.path != '/accounts/login/' and request.path != '/usuarios/registro/' %}
            <nav>
                <ul class="nav-links">
                    
                    {# 1. VISUALIZAR UNA CATEGORÍA (Visible para todos) #}
                    {# El enlace usa un parámetro GET para que lista_publicaciones.html sepa que debe mostrar las opciones de categoría #}
                    <li><a href="{% url 'publicaciones:lista' %}?mostrar_categorias=true">Visualizar una Categoría</a></li> 
                    
                    {% if user.is_authenticated %}
                        
                        {# OPCIONES DE COLABORADOR REGISTRADO #}
                        <li>Hola, <b>{{ user.username }}</b></li>
                        
                        {# 2. REGISTRAR UNA PUBLICACION (Publicar) #}
                        <li><a href="{% url 'publicaciones:crear' %}">Registrar Publicación</a></li>
                        
                        {# 3. CERRAR SESIÓN #}
                        <li>
                            <form action="{% url 'logout' %}" method="post" style="display: inline;">
                                {% csrf_token %} 
                                <button type="submit" style="border: none; background: none; color: inherit; cursor: pointer; padding: 0;">Cerrar Sesión</button>
                            </form>
                        </li>
                        
                    {% else %} 
                        {# OPCIONES DE VISITANTE ANÓNIMO #}
                        
                        {# 2. REGÍSTRATE COMO VISITANTE #}
                        <li><a href="{% url 'usuarios:registro' %}">Regístrate como Visitante</a></li> 
                        <li><a href="{% url 'login' %}">Iniciar Sesión</a></li>
                        
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    </header>

    <main>
        {% block contenido %}
        
        {# MENSAJE PARA VISITANTES ANÓNIMOS EN LA PÁGINA PRINCIPAL #}
        {% if not user.is_authenticated and request.path == '/' %}
            <div style="border-left: 5px solid #007bff; padding: 10px; margin-bottom: 20px; background-color: #e9f7fe;">
                <p>Obs. Si quieres dejar tu comentario sobre una Publicación, haz clic sobre el Título de la Publicación y te pediremos iniciar sesión.</p>
            </div>
        {% endif %}

>>>>>>> 4f114730af45f235e4354b8ed00145427861897c
        {% endblock contenido %}
    </main>

    <footer>
<<<<<<< HEAD
        <div class="footer-bottom-minimal">
            <p>
                &copy; {% now "Y" %}. Todos los derechos reservados.
            </p>
        </div>
    </footer>

    {% block scripts %}
    {% endblock scripts %}

    <script>
        // Función para abrir/cerrar el menú
        function toggleMenu() {
            document.getElementById("miDropdown").classList.toggle("mostrar");
        }

        // Función Opcional: Cerrar el menú si haces clic fuera de él
        window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('mostrar')) {
                        openDropdown.classList.remove('mostrar');
                    }
                }
            }
        }
    </script>


=======
        <p>&copy; 2025 Mi Primer Web Blog de Noticias</p>
    </footer>

>>>>>>> 4f114730af45f235e4354b8ed00145427861897c
</body>
</html>